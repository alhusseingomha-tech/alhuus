<!DOCTYPE html>
<html lang="{{ lang or 'ar' }}">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}alhusseingomha{% endblock %}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Bootstrap RTL -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css">
    <!-- ملف CSS إضافي إن وجد -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/icons.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/search-enhanced.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        function toggleDark() {
            fetch('/toggle_dark').then(() => location.reload());
        }
    </script>
    <style>
        body.dark {
            background-color: #18191a !important;
            color: #f1f1f1 !important;
        }
        body.dark .navbar {
            background-color: #23272b !important;
        }
        body.dark .card {
            background-color: #23272b !important;
            color: #f1f1f1 !important;
        }
    </style>
</head>
<body class="bg-light {% if session.get('dark') %}dark{% endif %}">
    <nav class="navbar navbar-expand-lg navbar-light bg-white mb-4 rounded shadow-sm">
        <div class="container-fluid">
            <a class="site-logo" href="{{ url_for('index') }}">
                <div class="site-logo-icon"></div>
                alhusseingomha
            </a>
            <div class="mx-3">
                <div class="search-container position-relative d-flex align-items-center">
                    <input type="text" 
                           id="projectSearch" 
                           class="form-control rounded-pill" 
                           placeholder="{% if lang == 'ar' %}بحث...{% else %}Search...{% endif %}"
                           style="width: 250px; padding-right: 40px;"
                           onkeypress="handleSearchKeyPress(event)">
                    <button type="button" 
                            class="btn btn-link position-absolute end-0 top-50 translate-middle-y me-2 p-0"
                            onclick="performSearch()"
                            style="border: none; background: none; color: #667eea;">
                        <i class="fas fa-search"></i>
                    </button>
                </div>
            </div>
            <div>
                <a class="language-icon {{ 'ar' if lang == 'ar' else 'en' }}" href="/?lang={{ 'en' if lang == 'ar' else 'ar' }}">
                    {% if lang == 'ar' %}🇺🇸 English{% else %}🇸🇦 العربية{% endif %}
                </a>
                <button class="btn btn-outline-secondary" onclick="toggleDark()">🌙</button>
                {% if current_user.is_authenticated %}
                    <a class="btn btn-primary" href="{{ url_for('dashboard') }}">لوحة التحكم</a>
                    <a class="btn btn-danger" href="{{ url_for('logout') }}">خروج</a>
                {% else %}

                {% endif %}
            </div>
        </div>
    </nav>
    <div class="container py-4">
        {% block content %}
        <div class="row align-items-center">
            <div class="col-md-6 text-center text-md-start">
                {% if lang == 'ar' %}
                    <h1 class="display-3 fw-bold mb-3">مرحبًا بك في عالمي!</h1>
                    <p class="lead mb-4">أنا مطور ويب شغوف، أقدم لك أفضل مشاريعي وخبراتي التقنية.</p>
                {% else %}
                    <h1 class="display-3 fw-bold mb-3">Welcome to My World!</h1>
                    <p class="lead mb-4">I'm a passionate web developer, sharing my best projects and tech experience.</p>
                {% endif %}
                <a href="{{ url_for('projects') }}" class="btn btn-primary btn-lg px-4">
                    {% if lang == 'ar' %}مشاريعي{% else %}My Projects{% endif %}
                </a>
            </div>
            <div class="col-md-6 text-center">
                <img src="https://images.unsplash.com/photo-1461749280684-dccba630e2f6?auto=format&fit=crop&w=800&q=80" class="img-fluid" alt="Portfolio">
            </div>
        </div>
        <hr class="my-5">
        <div class="card mb-4 shadow-sm">
            <div class="card-body">
                <h3 class="card-title mb-3">{% if lang == 'ar' %}نبذة عني{% else %}About Me{% endif %}</h3>
                <p class="card-text">
                    {% if lang == 'ar' %}
                        {{ about_me.text_ar if about_me else "لم تتم إضافة نبذة بعد." }}
                    {% else %}
                        {{ about_me.text_en if about_me else "No about info yet." }}
                    {% endif %}
                </p>
            </div>
        </div>
        {% endblock %}
    </div>
    <footer class="text-center py-4 border-top mt-5">
        <div class="mb-2">
            {% for link in social_links %}
                <a href="{{ link.url }}" target="_blank" class="mx-2"><i class="{{ link.icon }} fa-2x"></i></a>
            {% endfor %}
        </div>
        <div class="small text-muted">
            &copy; {{ 2025 }} alhusseingomha
        </div>
    </footer>
</body>
</html>